
<?php
    $this->headScript()->appendFile($this->baseUrl('lib/select2/select2.min.js'));
    $this->headScript()->appendFile($this->baseUrl('lib/select2/select2_locale_pt-BR.js'));
    $this->headScript()->appendFile($this->baseUrl('js/jquery.dataTables.js'));
    $this->headScript()->appendFile($this->baseUrl('js/admin/presenca/index.js'));

    $this->headLink()->appendStylesheet($this->baseUrl('lib/select2/select2.css'));
    $this->headLink()->appendStylesheet($this->baseUrl('css/form.css'));
    $this->headLink()->appendStylesheet($this->baseUrl('css/tabela_sort.css'));
?>

<a href="<?php echo $this->url(array('module' => 'admin',
    'controller' => 'evento',
    'action' => 'detalhes',
    'id' => $this->id), 'default', true) ?>"
    class="no-bottom">
    <i class="icon-reply"></i> Voltar
</a>

<br><br>

<fieldset>
    <form method="post" action="<?php echo $this->url(array(
        'module' => 'admin',
        'controller' => 'presenca',
        'action' => 'salvar'
    ), 'default', true); ?>">
        <span>Adicionar participantes ao evento:
            <strong>
                <?php echo $this->evento['nome_tipo_evento'] ?>:
                <?php echo $this->evento['nome_evento'] ?>
            </strong>
            por <?php echo $this->evento['nome'] ?>.
        </span>
        <br/><br/>
        <input type="hidden" id="participantes" name="array_id_pessoas" style="width: 500px;"/>
        <input type="hidden" name="id" value="<?php echo $this->id; ?>" />
        <input type="hidden" name="id_evento_realizacao" value="<?php echo $this->id_evento_realizacao; ?>" />
        <dl class="zend_form">
            <input type="submit" name="submit" id="submit" value="confimar"/>
        </dl>
    </form>
</fieldset>

<table class="display" cellpadding="0" cellspacing="0" border="0">
    <thead>
        <th>Participantes</th>
        <th>E-mail</th>
        <th style="width: 70px;">&nbsp;</th>
    </thead>
    <tbody>
        <?php foreach ($this->participantes as $participante): ?>
        <tr>
            <td><?php echo $participante['nome'] ?></td>
            <td><?php echo $participante['email'] ?></td>
            <td>
                <a title="Remover participante"
                    href="<?php echo $this->url(array('module' => 'admin',
                        'controller' => 'presenca',
                        'action' => 'deletar',
                        'id_pessoa' => $participante['id_pessoa'],
                        'id_evento' => $this->id,
                        'id_evento_realizacao' => $this->id_evento_realizacao,
                    ), 'default', true); ?>" class="no-bottom"
                    onclick="return confirm('Tem certeza que deseja deletar o participante?')">
                    <i class="icon-remove"></i> Deletar
                </a>
            </td>
        </tr>
        <?php endforeach; ?>
    </tbody>
</table>
